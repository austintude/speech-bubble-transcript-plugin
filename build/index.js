(()=>{"use strict";var e,t={942:()=>{const e=window.wp.element,t=(window.ReactDOM,window.wp.blocks),r=window.wp.blockEditor,a=window.wp.components,n=window.wp.i18n;(0,t.registerBlockType)("transcript-blocks/transcript-block",{apiVersion:2,title:"Transcript Block",description:"Add downloadable transcripts to your post.",category:"media",icon:"media-text",supports:{html:!1},attributes:{url:{type:"string",default:""},transcript:{type:"array",default:[]},speakers:{type:"array",default:[]}},edit:t=>{const{attributes:{url:o,transcript:s,speakers:c},setAttributes:l}=t,i=(0,r.useBlockProps)({className:"my-class-name"});return(0,e.createElement)("div",i,c.map(((t,o)=>(0,e.createElement)("div",{key:o},(0,e.createElement)(a.TextControl,{value:t.name,onChange:e=>l({speakers:c.map(((t,r)=>o===r?{...t,name:e}:t))})}),(0,e.createElement)(r.PanelColorSettings,{title:(0,n.__)("Color Settings","textdomain"),initialOpen:!1,colorSettings:[{value:t.color,onChange:e=>l({speakers:c.map(((t,r)=>o===r?{...t,color:e}:t))}),label:(0,n.__)("Background Color","textdomain")}]}),(0,e.createElement)(a.Button,{isDestructive:!0,onClick:()=>l({speakers:c.filter(((e,t)=>o!==t))})},(0,n.__)("Remove Speaker","textdomain"))))),(0,e.createElement)(a.Button,{variant:"primary",onClick:()=>l({speakers:[...c,{name:"Speaker "+(c.length+1),color:"#000000"}]})},(0,n.__)("Add Speaker","textdomain")),(0,e.createElement)(r.MediaUpload,{onSelect:async e=>{l({url:e.url});try{const t=await fetch("/wp-json/transcript-blocks/v1/parse-transcript",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id})});if(!t.ok)throw new Error("HTTP error "+t.status);const r=await t.json();l({transcript:r})}catch(e){console.error(e)}},allowedTypes:["text/plain"],render:t=>{let{open:r}=t;return(0,e.createElement)(a.Button,{onClick:r},(0,n.__)("Upload File","textdomain"))}}),s&&s.map(((t,r)=>{let{speaker:a,speech:n}=t;const o=c.find((e=>e.name===a));return(0,e.createElement)("div",{key:r,className:"transcript-block-wrapper"},(0,e.createElement)("strong",{className:"transcript-block-speech-speaker"},a,":"),(0,e.createElement)("div",{className:"transcript-block-speech",style:{backgroundColor:o?o.color:"#ffffff"}},(0,e.createElement)("span",{className:"transcript-block-speech-text"},n)))})))},save:t=>{const{attributes:{url:a,transcript:o,speakers:s}}=t,c=r.useBlockProps.save();return(0,e.createElement)("div",c,a&&(0,e.createElement)("a",{href:a,download:!0},(0,n.__)("Download Transcript","textdomain")),o&&o.map(((t,r)=>{let{speaker:a,speech:n}=t;const o=s.find((e=>e.name===a))||{};return(0,e.createElement)("div",{key:r,className:"transcript-block-wrapper"},(0,e.createElement)("strong",{className:"transcript-block-speech-speaker"},a,":"),(0,e.createElement)("div",{className:"transcript-block-speech",style:{backgroundColor:o.color}},(0,e.createElement)("span",{className:"transcript-block-speech-text"},n)))})))}})}},r={};function a(e){var n=r[e];if(void 0!==n)return n.exports;var o=r[e]={exports:{}};return t[e](o,o.exports,a),o.exports}a.m=t,e=[],a.O=(t,r,n,o)=>{if(!r){var s=1/0;for(p=0;p<e.length;p++){for(var[r,n,o]=e[p],c=!0,l=0;l<r.length;l++)(!1&o||s>=o)&&Object.keys(a.O).every((e=>a.O[e](r[l])))?r.splice(l--,1):(c=!1,o<s&&(s=o));if(c){e.splice(p--,1);var i=n();void 0!==i&&(t=i)}}return t}o=o||0;for(var p=e.length;p>0&&e[p-1][2]>o;p--)e[p]=e[p-1];e[p]=[r,n,o]},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={826:0,431:0};a.O.j=t=>0===e[t];var t=(t,r)=>{var n,o,[s,c,l]=r,i=0;if(s.some((t=>0!==e[t]))){for(n in c)a.o(c,n)&&(a.m[n]=c[n]);if(l)var p=l(a)}for(t&&t(r);i<s.length;i++)o=s[i],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(p)},r=globalThis.webpackChunktranscripts_block=globalThis.webpackChunktranscripts_block||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var n=a.O(void 0,[431],(()=>a(942)));n=a.O(n)})();