(()=>{"use strict";var e,t={443:()=>{const e=window.wp.element,t=window.wp.blocks,r=window.wp.blockEditor,a=window.wp.components,o=window.wp.i18n;(0,t.registerBlockType)("transcript-blocks/transcript-block",{apiVersion:2,title:"Transcript Block",description:"Add downloadable transcripts to your post.",category:"media",icon:"media-text",supports:{html:!1},attributes:{url:{type:"string",default:""},transcript:{type:"array",default:[]},speakers:{type:"array",default:[{name:"Speaker 1",color:"#000000",role:"host"}]}},edit:t=>{const{attributes:{url:s,transcript:n,speakers:l},setAttributes:c}=t,i=(0,r.useBlockProps)({className:"my-class-name"});return(0,e.createElement)("div",i,(0,e.createElement)(r.InspectorControls,null,(0,e.createElement)(a.PanelBody,{title:(0,o.__)("Speakers Settings","textdomain"),initialOpen:!0},l.map(((t,s)=>(0,e.createElement)("div",{key:s},(0,e.createElement)(a.TextControl,{label:(0,o.__)("Name","textdomain"),value:t.name,onChange:e=>c({speakers:l.map(((t,r)=>s===r?{...t,name:e}:t))})}),(0,e.createElement)(r.PanelColorSettings,{title:(0,o.__)("Color Settings","textdomain"),initialOpen:!1,colorSettings:[{value:t.color,onChange:e=>c({speakers:l.map(((t,r)=>s===r?{...t,color:e}:t))}),label:(0,o.__)("Background Color","textdomain")}]}),(0,e.createElement)(a.SelectControl,{label:(0,o.__)("Role","textdomain"),value:t.role,options:[{label:"Guest",value:"guest"},{label:"Host",value:"host"}],onChange:e=>c({speakers:l.map(((t,r)=>s===r?{...t,role:e}:t))})}),(0,e.createElement)(a.Button,{isDestructive:!0,onClick:()=>c({speakers:l.filter(((e,t)=>s!==t))})},(0,o.__)("Remove Speaker","textdomain"))))),(0,e.createElement)(a.Button,{variant:"primary",onClick:()=>c({speakers:[...l,{name:"Speaker "+(l.length+1),color:"#000000",role:"host"}]})},(0,o.__)("Add Speaker","textdomain")))),(0,e.createElement)(r.MediaUpload,{onSelect:async e=>{c({url:e.url});try{const t=await fetch("/wp-json/transcript-blocks/v1/parse-transcript",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id})});if(console.log("HTTP response status:",t.status),console.log("HTTP response text:",await t.clone().text()),!t.ok)throw new Error("HTTP error "+t.status);const r=await t.json();c({transcript:r})}catch(e){console.error("Error during transcript parsing:",e)}},allowedTypes:["text/plain"],render:t=>{let{open:r}=t;return(0,e.createElement)(a.Button,{onClick:r},(0,o.__)("Upload File","textdomain"))}}),n&&n.map(((t,r)=>{let{speaker:a,speech:o}=t;const s=l.find((e=>e.name===a));return(0,e.createElement)("div",{key:r,className:"transcript-block-wrapper "+(s&&"guest"===s.role?"guest":"host"),style:{backgroundColor:s?s.color:"#ffffff"}},(0,e.createElement)("strong",{className:"transcript-block-speech-speaker"},a,":"),(0,e.createElement)("div",{className:"transcript-block-speech",style:{backgroundColor:s?s.color:"#ffffff"}},(0,e.createElement)("span",{className:"transcript-block-speech-text"},o)))})))},save:t=>{const{attributes:{url:a,transcript:s,speakers:n}}=t,l=r.useBlockProps.save();return(0,e.createElement)("div",l,a&&(0,e.createElement)("a",{href:a,download:!0},(0,o.__)("Download Transcript","textdomain")),s&&s.map(((t,r)=>{let{speaker:a,speech:o}=t;const s=n.find((e=>e.name===a));return(0,e.createElement)("div",{key:r,className:"transcript-block-wrapper "+("guest"===s.role?"guest":"host")},(0,e.createElement)("strong",{className:"transcript-block-speech-speaker"},a,":"),(0,e.createElement)("div",{className:"transcript-block-speech",style:{backgroundColor:s?s.color:"#ffffff"}},(0,e.createElement)("span",{className:"transcript-block-speech-text"},o)))})))}})}},r={};function a(e){var o=r[e];if(void 0!==o)return o.exports;var s=r[e]={exports:{}};return t[e](s,s.exports,a),s.exports}a.m=t,e=[],a.O=(t,r,o,s)=>{if(!r){var n=1/0;for(p=0;p<e.length;p++){for(var[r,o,s]=e[p],l=!0,c=0;c<r.length;c++)(!1&s||n>=s)&&Object.keys(a.O).every((e=>a.O[e](r[c])))?r.splice(c--,1):(l=!1,s<n&&(n=s));if(l){e.splice(p--,1);var i=o();void 0!==i&&(t=i)}}return t}s=s||0;for(var p=e.length;p>0&&e[p-1][2]>s;p--)e[p]=e[p-1];e[p]=[r,o,s]},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={826:0,431:0};a.O.j=t=>0===e[t];var t=(t,r)=>{var o,s,[n,l,c]=r,i=0;if(n.some((t=>0!==e[t]))){for(o in l)a.o(l,o)&&(a.m[o]=l[o]);if(c)var p=c(a)}for(t&&t(r);i<n.length;i++)s=n[i],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(p)},r=globalThis.webpackChunktranscripts_block=globalThis.webpackChunktranscripts_block||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var o=a.O(void 0,[431],(()=>a(443)));o=a.O(o)})();